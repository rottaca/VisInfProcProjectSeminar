#include "helper.h"
#include <QtMath>

#define LUT_COLORMAP_SZ 256
static uchar rgbColormapLUT[LUT_COLORMAP_SZ*3] = {
    255, 1, 0,
   254, 3, 0,
   252, 5, 0,
   250, 7, 0,
   248, 9, 0,
   246, 11, 0,
   244, 13, 0,
   242, 15, 0,
   240, 17, 0,
   238, 19, 0,
   236, 21, 0,
   234, 23, 0,
   232, 25, 0,
   230, 27, 0,
   228, 29, 0,
   226, 31, 0,
   224, 33, 0,
   222, 35, 0,
   220, 37, 0,
   218, 39, 0,
   216, 41, 0,
   214, 43, 0,
   212, 45, 0,
   210, 47, 0,
   208, 49, 0,
   206, 51, 0,
   204, 53, 0,
   202, 55, 0,
   200, 57, 0,
   198, 59, 0,
   196, 61, 0,
   194, 63, 0,
   192, 65, 0,
   190, 67, 0,
   188, 69, 0,
   186, 71, 0,
   184, 73, 0,
   182, 75, 0,
   180, 77, 0,
   178, 79, 0,
   176, 81, 0,
   174, 83, 0,
   172, 85, 0,
   170, 87, 0,
   168, 89, 0,
   166, 91, 0,
   164, 93, 0,
   162, 95, 0,
   160, 97, 0,
   158, 99, 0,
   156, 101, 0,
   154, 103, 0,
   152, 105, 0,
   150, 107, 0,
   148, 109, 0,
   146, 111, 0,
   144, 113, 0,
   142, 115, 0,
   140, 117, 0,
   138, 119, 0,
   136, 121, 0,
   134, 123, 0,
   132, 125, 0,
   130, 127, 0,
   128, 129, 0,
   126, 131, 0,
   124, 133, 0,
   122, 135, 0,
   120, 137, 0,
   118, 139, 0,
   116, 141, 0,
   114, 143, 0,
   112, 145, 0,
   110, 147, 0,
   108, 149, 0,
   106, 151, 0,
   104, 153, 0,
   102, 155, 0,
   100, 157, 0,
   98, 159, 0,
   96, 161, 0,
   94, 163, 0,
   92, 165, 0,
   90, 167, 0,
   88, 169, 0,
   86, 171, 0,
   84, 173, 0,
   81, 175, 0,
   79, 177, 0,
   77, 179, 0,
   75, 181, 0,
   73, 183, 0,
   71, 185, 0,
   69, 187, 0,
   67, 189, 0,
   65, 191, 0,
   63, 193, 0,
   61, 195, 0,
   59, 197, 0,
   57, 199, 0,
   55, 201, 0,
   53, 203, 0,
   51, 205, 0,
   49, 207, 0,
   47, 209, 0,
   45, 211, 0,
   43, 213, 0,
   41, 215, 0,
   39, 217, 0,
   37, 219, 0,
   35, 221, 0,
   33, 223, 0,
   31, 225, 0,
   29, 227, 0,
   27, 229, 0,
   25, 231, 0,
   23, 233, 0,
   21, 235, 0,
   19, 237, 0,
   17, 239, 0,
   15, 241, 0,
   13, 243, 0,
   11, 245, 0,
   9, 247, 0,
   7, 249, 0,
   5, 251, 0,
   3, 253, 0,
   1, 255, 0,
   0, 255, 1,
   0, 253, 3,
   0, 251, 5,
   0, 249, 7,
   0, 247, 9,
   0, 245, 11,
   0, 243, 13,
   0, 241, 15,
   0, 239, 17,
   0, 237, 19,
   0, 235, 21,
   0, 233, 23,
   0, 231, 25,
   0, 229, 27,
   0, 227, 29,
   0, 225, 31,
   0, 223, 33,
   0, 221, 35,
   0, 219, 37,
   0, 217, 39,
   0, 215, 41,
   0, 213, 43,
   0, 211, 45,
   0, 208, 47,
   0, 206, 49,
   0, 204, 51,
   0, 202, 53,
   0, 200, 55,
   0, 198, 57,
   0, 196, 59,
   0, 194, 61,
   0, 192, 63,
   0, 190, 65,
   0, 188, 67,
   0, 186, 69,
   0, 184, 71,
   0, 182, 73,
   0, 180, 75,
   0, 178, 77,
   0, 176, 79,
   0, 174, 81,
   0, 172, 82,
   0, 170, 84,
   0, 168, 86,
   0, 166, 88,
   0, 164, 90,
   0, 162, 92,
   0, 160, 94,
   0, 158, 96,
   0, 156, 98,
   0, 154, 100,
   0, 152, 102,
   0, 150, 104,
   0, 148, 106,
   0, 146, 108,
   0, 144, 110,
   0, 142, 112,
   0, 140, 114,
   0, 138, 116,
   0, 136, 118,
   0, 134, 120,
   0, 132, 122,
   0, 130, 124,
   0, 128, 126,
   0, 126, 128,
   0, 124, 130,
   0, 122, 132,
   0, 120, 134,
   0, 118, 136,
   0, 116, 138,
   0, 114, 140,
   0, 112, 142,
   0, 110, 144,
   0, 108, 146,
   0, 106, 148,
   0, 104, 151,
   0, 102, 153,
   0, 100, 155,
   0, 98, 157,
   0, 96, 159,
   0, 94, 161,
   0, 92, 163,
   0, 90, 165,
   0, 88, 167,
   0, 86, 169,
   0, 84, 171,
   0, 82, 173,
   0, 80, 175,
   0, 78, 177,
   0, 76, 179,
   0, 74, 181,
   0, 72, 183,
   0, 70, 185,
   0, 68, 187,
   0, 66, 189,
   0, 64, 191,
   0, 62, 193,
   0, 60, 195,
   0, 58, 197,
   0, 56, 199,
   0, 54, 201,
   0, 52, 203,
   0, 50, 205,
   0, 48, 207,
   0, 46, 209,
   0, 44, 211,
   0, 42, 213,
   0, 40, 215,
   0, 38, 217,
   0, 36, 219,
   0, 34, 221,
   0, 32, 223,
   0, 30, 225,
   0, 28, 227,
   0, 26, 229,
   0, 24, 231,
   0, 22, 234,
   0, 20, 236,
   0, 18, 238,
   0, 16, 240,
   0, 14, 242,
   0, 12, 244,
   0, 10, 246,
   0, 8, 248,
   0, 6, 250,
   0, 4, 252,
   0, 2, 254,
   0, 0, 255
};


void Helper::pseudoColor(double v,double min, double max,uchar* r, uchar* g, uchar* b)
{
    int idx = qRound((v - min)/max*255);
    if(idx < 0)
        idx = 0;
    else if(idx >= LUT_COLORMAP_SZ)
        idx = LUT_COLORMAP_SZ-1;

    idx *= 3;
    *r = rgbColormapLUT[idx++];
    *g = rgbColormapLUT[idx++];
    *b = rgbColormapLUT[idx++];
}
